# CommuniCity Toolbox

The CommuniCity Toolbox is a set of open-source components, services and implementations based on the [MIMs](#oasc-mims), developed as part of the [CommuniCity Project](https://communicity-project.eu/). 

## Content
- [Overview](#overview)
    - [OASC MIMs](#oasc-mims)
- [Toolbox Components](#toolbox-components)
    - [Projects](#projects)
    - [Machine learning models](#machine-learning-models)
    - [Data models](#data-models)
- [Installation](#installation)
- [Usage](#usage)
- [Contributing](#contributing)
- [License](#license)

## Overview

The Toolbox project aims to provide a set of software components, services and approaches to support the design and development of innovative solutions inside the [CommuniCity Project](https://communicity-project.eu/). The main objective of the toolbox is, on one hand, to enable developers to speed up and simplify the implementation of city solutions, and on the other hand, to provide tools that enable the interoperability between existing systems and developers' solutions and ensure the replicability of the developed applications.

More precisely, the main features that the Toolbox offers are:
- A set of ready-to-use AI solutions that uses an NGSI-LD context broker to get and post data based on well-defined data models.
- Specifications of the used data models.
- Full support of the first three MIMs.
- A collection of machine learning models spanning various domains.
- A collection of tools and implementations that helps developers build MIM-based solutions.

### OASC MIMs

[Minimal Interoperability Mechanisms](https://mims.oascities.org/basics/oasc-mims-introduction) (MIMs) are universal tools for achieving interoperability of data, systems, and services between cities and suppliers around the world. MIMs are based on a set of baseline specifications and references related to the different cities and communities that are part of the [OASC network](https://oascities.org/).

The current version of the Toolbox supports the following reference implementation of the first three MIMs. Future improvements of the Toolbox will offer availability of more reference implementations and support for new MIMs:

#### MIM1 - Context Information Management

Context information contains comprehensive status information about real-world entities defined in a structured way with a formal definition. The Toolbox components are designed to produce context data based on the [NGSI-LD](https://www.etsi.org/deliver/etsi_gs/CIM/001_099/009/01.06.01_60/gs_cim009v010601p.pdf) standard which can be then published to a context broker, making it available to any application. This approach enables an efficient way of retrieving and publishing data, utilizing a well-known standard and unifying the output of each component on a single common endpoint.

The proposed implementation is [Orion-LD Context Broker](https://github.com/FIWARE/context.Orion-LD), a Context Broker for context data management that supports both the NGSI-LD and the NGSI-v2.

#### MIM2 - Smart Data Models    

Each of the Toolbox components generates its own entities with a specific structure and data types for the task it is performing. To formally define the component's output a set of data models is created. These models capture the purpose of each task and describe the attributes that it must hold.  

The [Smart Data Models initiative](https://smartdatamodels.org/) is the baseline repository for common data models to be used in CommuniCity. In addition, [new data models](./docs/data-models.md) are created to fit the requirements of the Toolbox. 

#### MIM3 - Ecosystem Transaction Management  

A standardized data marketplace is used to expose the data generated by the Toolbox components along with the data models used, allowing the interoperability of different applications and systems. This marketplace is used as a portal to discover and access the offered services in a secure and private way.

The implementation used in this project is the [Business API Ecosystem](https://github.com/FIWARE-TMForum/Business-API-Ecosystem). It provides capabilities for managing, publishing, and generating revenue from different kinds of assets (both digital and physical) across the whole service life cycle.

## Toolbox Components

### Projects

The Toolbox Projects are concrete implementations of some of the Toolbox components that are designed to be used by the end users or applications.
They also serve as a showcase of the functionalities of the Toolbox and provide practical examples of how to use the components to build real-world applications.

Projects work in conjunction with a context broker, which acts as a mediator between the Projects and the data sources. The input data is received from the context broker, which is then processed to generate an output that is posted back to the context broker.
This generated data uses the [NGSI-LD](https://www.etsi.org/deliver/etsi_gs/CIM/001_099/009/01.06.01_60/gs_cim009v010601p.pdf) format and follows the [data models](./docs/data-models.md) defined by the Toolbox.

Each Project comes with a REST API already implemented that allows it to be executed as a service. A [docker-compose file](docker-compose.yaml) is also provided to orchestrate the deployment of multiple services simultaneously.

The following table contains the currently provided Projects:

| Name                                                           | Description   |
|----------------------------------------------------------------|---------------|
| [FaceDetection](toolbox/Projects/FaceDetection/README.md)              | Detect faces on images |
| [FaceRecognition](toolbox/Projects/FaceRecognition/README.md)           | Detect and extract features of faces, create a facial dataset and recognize faces |
| [AgeGender](toolbox/Projects/AgeGender/README.md)                       | Detect faces, predicts their gender and estimate their age |
| [InstanceSegmentation](toolbox/Projects/InstanceSegmentation/README.md) | Performs instance segmentation on images |
| [Keypoints](toolbox/Projects/Keypoints/README.md)                       | Predicts the position of body key points |
| [FaceEmotions](toolbox/Projects/FaceEmotions/README.md)                 | Classify different types of face expressions |
| [ImageStorage](toolbox/Projects/ImageStorage/README.md)                 | API to upload and download images and visualize the data generated by the Toolbox |
| [FrontEnd](toolbox/Projects/FrontEnd/README.md)                 | Web UI to showcase the Toolbox Project APIs and components |

More details about Projects can be found [here](docs/projects.md).

### Machine learning models

The Toolbox provides a collection of machine learning models spanning various domains and performance levels. These models are used by the Toolbox Projects but can also be used out of the box as Python modules.

A complete list of the currently implemented models can be found [here](docs/machine-learning-models.md).

### Data models

The Toolbox provides a set of standardized data models that define the structure and content of the data generated and consumed by the Toolbox components. Also, components to interact with the context broker and parse its data are provided.

The data models specifications can be found [here](./docs/data-models.md).

## Installation

The Toolbox can be installed manually as a Python package or it can be used with the provided Docker image and Docker compose:

- To install the Toolbox as a Python package, refer to the [installation guide](docs/installation.md).

- To use the Toolbox with Docker see the [Docker guide](docs/docker.md).

## Usage

Check the [quick start]() guide for more information on how to use the Toolbox.

## Contributing

Contributions are always welcome. Feel free to submit issues, feature requests, or pull requests.

## License

This project is licensed under the [MIT License](https://github.com/CommuniCityProject/communicity_toolbox/blob/master/LICENSE).
